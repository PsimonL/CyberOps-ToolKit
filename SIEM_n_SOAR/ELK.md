# ELK (E - Elasticsearch, L - Logstash, K - Kibana)
Open-source stack used for **log** management, data analysis, and visualization. Together, these tools form **a complete solution for ingesting, storing, processing, and visualizing large volumes of data**, especially log data generated by systems, applications, and devices.

## Components of the **ELK Stack**:
- **Elasticsearch**: A distributed search and analytics engine. It's distributed cause it forms cluster. Can scale horizontally by adding more nodes to handle increasing data loads. So it's easily scalable, suitable for real-time log insights.
Kind of database used for storing, indexing, and querying data efficiently.
Enables powerful full-text search capabilities and fast data retrieval.
Data is stored in indices, divided into shards (smaller pieces of the dataset) for distribution across a cluster (which can be done in multiple ways).

- **Logstash**: A data collection and processing pipeline aggregation tool.
Collects, parses, and processes data from various sources (e.g., logs, APIs, metrics, databses, cloud services).
Applies filtering, transformation, and some kinds of enrichment to the data before sending it to Elasticsearch. Can process unstructured or semi-structured data in diverse formats.

- **Kibana**: A visualization and analytics tool.
Works with Elasticsearch to create dashboards, run queries, and visualize data in graphs, charts, or tables. Allows to explore, analyze, and monitor in real time.
It provides features: 
    + Discover: Search and filter raw data.
    + Dashboards: Combine multiple visualizations.
    + Alerting: Set up notifications based on specific conditions

- **Beats (Optional)**:
Agents that collect and forward data to Logstash. Lightweight which is suitable for every server. Natively configured to work with Logstash but can be reconfigured to work with Redis or Kafka. There are couple pre-defined agents with different applications:
    + Filebeat - for log files, handles different formats e.g. Apache, Nginx, MySQL.
    + Metricbeat - for system metrics, system metrics like CPU, memory or RAM, but it can also measure metrics for specific apps e.g. Kubernetes, Docker, MySQL etc. 
    + Packetbeat - network data, e.g. it can measure latency and analyse network protocols.
    + Auditbeat - security and OS audits data, it can monitore file changes, system, access or login events. 
    + Heartbeat - monitors availability of specific services, also checks if apps work correctly.

## Data Flow in ELK(B) stack
![alt text](/xyz_resources_n_images/ELK_stack.png)  
https://medium.com/hackernoon/deployment-of-full-scale-elk-stack-to-kubernetes-6f38f6c57c55  

## How does it relate to:
### A) Splunk
"They are both capable of collecting, parsing, and storing large amounts of data, and each one provides a wide range of features for searching, filtering, analyzing, and visualizing the collected data." BUT...  
Splunk is complete SIEM solution, ELK is not. But it can be used as a core component to build a custom SIEM solution with addition of some other tools. Some of those tools are:
- Elastic Security (provided by Elastic) - automated event correlation, threat detection and detection rules. It can analyse logs in context of security for example from firewall, IDS/IPS, OS. It can create security dashboards.
- Threat Intelligence - It mus be integrated with some tools related to correlate events with information about known security incidents, like VirusTotal.
- Alerts and response - Alert must be configured with Watcher or ElastAlert. It also requires repsonse tools (SOAR) like TheHive or Cortex. 
- Data collection from a wide range of sources – This is achieved through Beats and Logstash: logs from Windows/Linux, Palo Alto, Cisco ASA, Packetbeat, Apache, Nginx, MySQL, AWS, Azure, GCP, Suricata, OSSEC, Wazuh, Lyns, etc.
- Event correlation mechanisms – This is accomplished by the newly released tool Elastic Security.
- Audit and compliance reporting – Supported by Auditbeat, enabling monitoring of changes in file systems, registries, and configurations to meet regulatory requirements (e.g., GDPR, HIPAA, PCI DSS).
- Behavioral analysis and risk scoring – Elastic Security provides tools for analyzing unusual user behavior patterns and assigning risk scores to incidents, helping to detect advanced threats and internal attacks. For more data insight it might need to be integrated with external ML solutions.

https://betterstack.com/community/comparisons/splunk-vs-elastic-stack-elk/


### B) Grafana and Prometheus + Promtail and Loki
Grafana and Prometheus were initialy developed for metrics control and analysis. After creation of Loki and Promtail it also gained ability to aggregate logs like ELK stack. Grafana + Prometheus + Promtail and Loki is a simpler, more cost-effective solution, but with limited functionality when it comes to log processing compared to ELK.
ELK is a more advanced and flexible tool for log analysis and other unstructured data. It is ideal when you need advanced log analysis, full-text search, and data transformation.


https://github.com/PsimonL/Infrastructure_n_Configs/tree/main/Grafana_Monitoring_Stack  

